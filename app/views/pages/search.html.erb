<div class="container">
    <p>
        <a class="btn btn-info" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
            More Filter
        </a>        
    </p>
    <div class="collapse col-8" id="collapseExample">
        <div class="card card-body">
            <%= form_for :search do |f| %>
                <%# price range %>
                <div class="row mb-3 mt-3">
                    <div class="col-6">
                        Price Range
                    </div>
                    <div class="col-3">
                        Min Price:
                        <%= f.text_field :min_price, class: "form-control" %>
                    </div>
                    <div class="col-3">
                        Max Price:
                        <%= f.text_field :max_price, class: "form-control" %>
                    </div>
                </div>
                <%# /price range %>
                <%# date select %>
                <div class="border-top border-bottom">                
                    <div class="row mb-3 mt-3">
                        <div class="col-6">
                            <%= text_field_tag :start_date, params[:start_date], id: "start_date", placeholder: "Start Date", readonly: true, class: "form-control" %>
                        </div>
                        <div class="col-6">
                            <%= text_field_tag :end_date, params[:end_date], id: "end_date", placeholder: "End Date", readonly: true, class: "form-control", disabled: true %>
                        </div>
                        <script>
                            $(function(){
                                $("#start_date").datepicker({
                                    dateFormat: "dd-mm-yy",
                                    minDate: 0,
                                    maxDate: "3m",
                                    onSelect: function(selected){
                                        $("#end_date").datepicker("option", "minDate", selected);
                                        $("#end_date").attr("disabled", false);
                                    }
                                });
                                $("#end_date").datepicker({
                                    dateFormat: "dd-mm-yy",
                                    minDate: 0,
                                    maxDate: "3m",
                                    onSelect: function(selected){
                                        $("#start_date").datepicker("option", "maxDate", selected);
                                    }
                                });
                            });
                        </script>
                    </div>
                </div>
                <%# /date select %>
                <%# house type %>
                <div class="row mb-3 mt-3">
                    <div class="col-4">
                        <%= f.check_box :apartment %>
                        <%= label_tag(:apartment, "Apartment") %>
                    </div>
                    <div class="col-4">
                        <%= f.check_box :house %>
                        <%= label_tag(:house, "House") %>
                    </div>
                    <div class="col-4">
                        <%= f.check_box :bed_breakfast %>
                        <%= label_tag(:bed_breakfast, "Bed & Breakfast") %>
                    </div>
                </div>
                <%# /house type %>
                <%# room type %>
                <div class="border-top border-bottom">
                    <div class="row mb-3 mt-3">
                        <div class="col-4">
                        <%= check_box_tag :entire_room %>
                        <%= label_tag(:entire_room, "Entire Room") %>
                    </div>
                    <div class="col-4">
                        <%= check_box_tag :private %>
                        <%= label_tag(:private, "Private") %>
                    </div>
                    <div class="col-4">
                        <%= check_box_tag :shared %>
                        <%= label_tag(:shared, "Shared") %>
                    </div>
                    </div>
                </div>
                <%# /room type %>
                <%# hsa something %>
                <div class="row mb-3 mt-3">
                    <div class="col-4">
                        <h5>Guests</h5>
                        <%= f.select :accommodation, {'1': 1, '2': 2, '3': 3, '4+': 4}, { include_blank: 'Select...'}, { class: 'form-control' } %>
                    </div>
                    <div class="col-4">
                        <h5>Bedrooms</h5>
                        <%= f.select :bedroom_count, {'1': 1, '2': 2, '3': 3, '4+': 4}, { include_blank: 'Select...'}, { class: 'form-control' } %>
                    </div>
                    <div class="col-4">
                        <h5>Bathrooms</h5>
                        <%= f.select :bathroom_count, {'1': 1, '2': 2, '3': 3, '4+': 4}, { include_blank: 'Select...'}, { class: 'form-control' } %>
                    </div>
                </div>
                <%# /has something %>
                <%# amenities %>
                <div class="border-top border-bottom">
                    <div class="row row-cols-3 mb-3 mt-3">
                        <div class="col">
                            <%= f.check_box :has_tv %>
                            <%= label_tag(:tv, "TV") %>
                        </div>
                        <div class="col">
                            <%= f.check_box :has_kitchen %>
                            <%= label_tag(:kitchen, "Kitchen") %>
                        </div>
                        <div class="col">
                            <%= f.check_box :has_internet %>
                            <%= label_tag(:internet, "Internet") %>
                        </div>
                        <div class="col">
                            <%= f.check_box :has_heating %>
                            <%= label_tag(:heating, "Heating") %>
                        </div>
                        <div class="col">
                            <%= f.check_box :has_air_conditioning %>
                            <%= label_tag(:air_conditioning, "Air Conditioning") %>
                        </div>
                    </div>
                </div>
                <%# /amenities %>
                <div class="mb-3 mt-3">
                    <%= f.submit "Search", class: "btn btn-info btn-block float-right col-2" %>
                </div>
            <% end %>
        </div>
    </div>
    <div class="col-8">
        <div class="card-deck row row-cols-3">
            <% @rooms.each do |room| %>
                <div class="col mb-3">
                    <div class="card h-100">
                        <%= image_tag room.photos.first.image%>
                        <div class="card-body">
                            <%= link_to room.listing_name %><br>
                            $<%= room.price %> - <%= room.room_type %> - <%= room.bedroom_count %> Bedrooms<br>
                            <%#= stars %>
                            <div class="mt-3" id="stars_<%= room.id %>"></div>
                            <script>
                                $('#stars_<%= room.id %>').raty({
                                    path: '/assets',
                                    score: '<%= room.average_rating %>',
                                    readOnly: true
                                });
                            </script>
                        </div>
                    </div>
                </div>
            <% end %>
        </div>
    </div>
</div>